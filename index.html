<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>preload</title>
	<style>
		.a{
			background: url('./src/image/b1.jpg');
			width: 200px;
			height: 200px;
		}
	</style>

</head>
<body>
	<img pSrc="./src/image/b1.jpg" alt="">
	<img pSrc="./src/image/b2.jpg" alt="">
	<img pSrc="./src/image/b3.jpg" alt="">
	<img pSrc="./src/image/b4.jpg" alt="">


	<!--
	<script src="./src/js/preload.js"></script>
	-->
	<script src="./dist/js/preload.js"></script>
	<script>

	/**
	*	Preload 资源预加载组件
	*	@class Preload
	*	@param {object}	sources		必填	加载队列容器，支持队列加载以及加载一个队列后传入回调
	*   @param {object} connector   选填    后台数据接口，可选择同步或异步，同步需要传入回调
	*	@param {object}	wrap		选填	进度条容器，返回记载进度信息
	*
	*
	**/

		var preload = new Preload({
			sources: {
				imgs:{
					source:[
						"./src/image/b1.jpg",
						"./src/image/b2.jpg"
					],
					callback: function(){
						// alert(1);
					}
				}
			},
			connector: {
				int1: {
					url: 'http://localhost/tcc/index.php?callback=read&city=上海市',
					jsonp: true
				},
				int2: {
					url: 'http://localhost/tcc/index.php?callback=read&city=深圳市',
					jsonp: false,
					callback: function(data){
						console.log(data);
					}
				}

			},
			progress: function(completedCount, total){
				console.log(Math.floor((completedCount / total) * 100));
			}
		});


		function read(){
			console.log(arguments[0])
		}

		//console.log(preload.getProgress());
	</script>

	<!-- <img src="./b1.jpg" alt="">
	<img src="./b2.jpg" alt="">
	<img src="./b3.jpg" alt="">
	<img src="./b4.jpg" alt="">

	<audio src="./a.mp3" controls="controls">
	</audio> -->
</body>
</html>