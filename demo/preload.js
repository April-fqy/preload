!function(e){function t(a){if(o[a])return o[a].exports;var n=o[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){var a=o(1),n=o(3),r=o(2),c={};c.connectorLoad=a,c.imageLoad=n,c.cssLoad=r,window.Preload=c},function(e,t,o){var a=function(e){"use strict";this.opts={isDebug:!1,sources:null,connector:null,completeLoad:function(){}},this.params={_createXHR:null,head:document.getElementsByTagName("head")[0]};for(var t in e)this.opts[t]=e[t];this._init()};a.prototype={_init:function(){var e=this,t=e.opts,o=e.params;null!=t.connector&&(o._createXHR=e.getXHR(),e._getData())},_getData:function(){var e=this,t=e.opts;e.params;for(var o in t.connector)t.connector[o].jsonp?e.asynGetData(t.connector[o].url):e.syncGetData(t.connector[o].url,t.connector[o].callback)},syncGetData:function(e,t){var o=this,a=(o.opts,o.params);a._createXHR.onreadystatechange=function(){4==a._createXHR.readyState&&(a._createXHR.status>=200&&a._createXHR.status<300||304===a._createXHR.status)&&t(a._createXHR.responseText)},a._createXHR.open("GET",e,!0),a._createXHR.send(null)},asynGetData:function(e){var t=this,o=(t.opts,t.params),a=document.createElement("script");a.src=e,o.head.appendChild(a)},getXHR:function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject){if("string"!=typeof arguments.callee.activeXString){var e,t,o=["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp"];for(e=0,t=o.length;t>e;e++)try{new ActiveXObject(o[e]),arguments.callee.activeXString=o[e];break}catch(a){}}return new ActiveXObject(arguments.callee.activeXString)}throw new Error("No XHR object available.")}},e.exports=a},function(e,t,o){var a=function(e){"use strict";this.opts={isDebug:!1,sources:null};for(var t in e)this.opts[t]=e[t];this._init()};a.prototype={_init:function(){var e=this;e.opts,e.params;e.loadCss()},_initData:function(){var e=this,t=e.opts,o=e.params;o.linkNote.rel="stylesheet";for(var a in t.sources){var n=t.sources[a].tag;"head"==n||"body"==n?o.linkLocal.push(n):o.linkLocal.push("head");var r=t.sources[a].callback||function(){};o.linkCB.push(r);var c=t.sources[a].media||"all";o.linkMedia.push(c)}console.log(o.linkLocal),console.log(o.callback),console.log(o.media)},loadCss:function(){var e=this,t=e.opts;e.params;for(var o in t.sources){var a=document.createElement("link");a.rel="stylesheet";var n=t.sources[o].tag;if(n="body"==n?document.body:document.head,a.href=t.sources[o].href,a.media=t.sources[o].media||"all",n.appendChild(a),t.sources[o].callback&&(a.addEventListener&&a.addEventListener("load",t.sources[o].callback),a.attachEvent&&a.attachEvent("onload",t.sources[o].callback),"isApplicationInstalled"in navigator))for(var r=a.href,o=sheets.length;o--;)if(sheets[o].href===r)return t.sources[o].callback()}}},e.exports=a},function(e,t,o){var a=function(e){"use strict";this.opts={isDebug:!1,sources:null,progress:function(){},completeLoad:function(){},config:{timeOut:e.loadingOverTime||15,timeOutCB:e.loadingOverTimeCB||function(){}}},this.params={echetotal:0,echelon:[],echelonlen:[],echeloncb:[],id:0,flag:0,allowType:["jpg","jpeg","png","gif"],total:0,completedCount:0,imgNode:[],imgNodePSrc:[],audioNode:[],audioNodePSrc:[]};for(var t in e)this.opts[t]=e[t];this._init()};a.prototype={_init:function(){var e=this,t=(e.opts,e.params);e._initData(),e._load(t.echelon[0],t.echeloncb[0],t.echelonlen)},_initData:function(){var e=this,t=e.opts,o=e.params;if(null!==t.sources){o.echetotal=Object.getOwnPropertyNames(t.sources).length;for(var a in t.sources){for(var n=0,r=t.sources[a].source.length;r>n;n++)o.echelon.push(t.sources[a].source[n]);o.echelonlen.push(t.sources[a].source.length),o.echeloncb.push("undefined"==typeof t.sources[a].callback?null:t.sources[a].callback)}for(var a=1,r=o.echelonlen.length;r>a;a++)o.echelonlen[a]=o.echelonlen[a-1]+o.echelonlen[a];o.total=o.echelon.length,o.imgNode=document.getElementsByTagName("img");for(var a=0,r=o.imgNode.length;r>a;a++)o.imgNode[a].attributes.pSrc&&(o.imgNodePSrc[a]=o.imgNode[a].attributes.pSrc.value);o.audioNode=document.getElementsByTagName("audio");for(var a=0,r=o.audioNode.length;r>a;a++)o.audioNode[a].attributes.pSrc&&(o.audioNodePSrc[a]=o.audioNode[a].attributes.pSrc.value)}},_load:function(e,t,o){var a=this,n=a.opts,r=a.params;if(r.id>=o[r.flag]&&(null!=r.echeloncb[r.flag]&&r.echeloncb[r.flag](),++r.flag),r.id>=r.total)return void n.completeLoad();if(a.isImg(e)){var c=new Image,s=setTimeout(function(){n.config.timeOutCB()},1e3*n.config.timeOut);c.src=e,c.onload=function(){clearTimeout(s),n.progress(++r.completedCount,r.total);for(var c=0,i=r.imgNodePSrc.length;i>c;c++)if(r.imgNodePSrc[c]==e){r.imgNode[c].src=r.imgNodePSrc[c];break}a._load(r.echelon[++r.id],t,o)},c.onerror=function(){n.progress(++r.completedCount,r.total),a._load(r.echelon[++r.id],t,o)}}else a.throwIf("使用未允许类型图片或非图片类型"),n.progress(++r.completedCount,r.total),a._load(r.echelon[++r.id],t,o)},isImg:function(e){for(var t=this,o=(t.opts,t.params),a=e.split(".").pop(),n=0,r=o.allowType.length;r>n;n++)if(a==o.allowType[n])return!0;return!1},throwIf:function(e){var t=this,o=t.opts,e=(t.params,e||"未知错误");return o.isDebug?void alert(e):void 0}},e.exports=a}]);